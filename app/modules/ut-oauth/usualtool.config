<?xml version='1.0' encoding='UTF-8'?>
<mod>
<id>ut-oauth</id>
<modtype>3</modtype>
<auther>黄豆</auther>
<title>OAuth</title>
<modname>OAuth</modname>
<ver>1.5</ver>
<description>使用OAuth 2.0可进行第三方应用的认证和授权。</description>
<itemid>3</itemid>
<ordernum>97</ordernum>
<modurl>index.php</modurl>
<befoitem>NULL</befoitem>
<backitem>管理应用:index.php,授权记录:log.php,权限集合:role.php,用户列表:user.php</backitem>
<installsql><![CDATA[DROP TABLE IF EXISTS `oauth_clients`;
CREATE TABLE `oauth_clients` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT '0',
  `client_id` varchar(80) DEFAULT NULL,
  `client_secret` varchar(80) DEFAULT NULL,
  `redirect_uri` varchar(250) DEFAULT NULL,
  `grant_types` varchar(80) DEFAULT 'authorization_code',
  `scope` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_access_tokens`;
CREATE TABLE `oauth_access_tokens` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `access_token` varchar(40) DEFAULT NULL,
  `client_id` varchar(80) DEFAULT NULL,
  `user_id` varchar(80) DEFAULT NULL,
  `expires` TIMESTAMP DEFAULT NULL,
  `scope` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_authorization_codes`;
CREATE TABLE `oauth_authorization_codes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `authorization_code` varchar(40)  DEFAULT NULL,
  `client_id` varchar(80)  DEFAULT NULL,
  `user_id` varchar(80) DEFAULT NULL,
  `redirect_uri` varchar(250) DEFAULT NULL,
  `expires` TIMESTAMP DEFAULT NULL,
  `scope` varchar(250) DEFAULT NULL,
  `id_token` varchar(250) DEFAULT NULL,
  `code_challenge` varchar(128) DEFAULT NULL,
  `code_challenge_method` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_refresh_tokens`;
CREATE TABLE `oauth_refresh_tokens` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `refresh_token` varchar(40) DEFAULT NULL,
  `client_id` varchar(80) DEFAULT NULL,
  `user_id` varchar(80) DEFAULT NULL,
  `expires` TIMESTAMP DEFAULT NULL,
  `scope` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_users`;
CREATE TABLE `oauth_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,  
  `username` varchar(80) DEFAULT NULL,
  `password` varchar(80) DEFAULT NULL,
  `fullname` varchar(80) DEFAULT NULL,
  `email` varchar(80) DEFAULT NULL,
  `addtime` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_scopes`;
CREATE TABLE `oauth_scopes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(50) DEFAULT NULL,
  `scope` varchar(50) DEFAULT NULL,
  `dbtable` varchar(50) DEFAULT NULL,
  `is_default` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `oauth_jwt`;
CREATE TABLE `oauth_jwt` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `client_id` varchar(80) DEFAULT NULL,
  `subject` varchar(80) DEFAULT NULL,
  `public_key` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;]]></installsql>
<uninstallsql><![CDATA[DROP TABLE `oauth_clients`;DROP TABLE `oauth_access_tokens`;DROP TABLE `oauth_authorization_codes`;DROP TABLE `oauth_refresh_tokens`;DROP TABLE `oauth_users`;DROP TABLE `oauth_scopes`;DROP TABLE `oauth_jwt`;]]></uninstallsql>
</mod>